<%- include('../../partials/header') %>

<div class="container py-5">
	<h2 class="mb-4 text-primary fw-bold">๐ฅ ูุงุฆูุฉ ุงููุณุชุฎุฏููู</h2>

	<% if (users.length === 0) { %>
		<div class="alert alert-warning">ูุง ููุฌุฏ ูุณุชุฎุฏููู ุจุนุฏ.</div>
	<% } else { %>
		<div class="table-responsive">
			<table class="table table-hover table-bordered shadow-sm bg-white">
				<thead class="table-light text-center">
					<tr>
						<th>#</th>
						<th>๐ค ุงูุงุณู</th>
						<th>๐ง ุงูุฅูููู</th>
						<th>๐ญ ุงูุฏูุฑ</th>
						<th>๐ก๏ธ ุงูุตูุงุญูุงุช</th>
						<th>โ๏ธ ุงูุชุญูู</th>
					</tr>
				</thead>
				<tbody>
					<% users.forEach((user, index) => { %>
						<tr>
							<td class="text-center"><%= index + 1 %></td>
							<td><strong><%= user.name %></strong></td>
							<td><%= user.email %></td>
							<td><span class="badge bg-dark text-white"><%= user.role?.name || 'ุจุฏูู' %></span></td>
							<td>
								<% if (user.role?.permissions?.length) { %>
									<% user.role.permissions.forEach(p => { %>
										<span class="badge bg-info text-dark mb-1"><%= p.key %></span>
									<% }) %>
								<% } else { %>
									<span class="text-muted">ูุง ููุฌุฏ</span>
								<% } %>
							</td>
							<td class="text-center">
								<a href="/admin/users/<%= user._id %>/edit" class="btn btn-sm btn-warning me-1">โ๏ธ ุชุนุฏูู</a>
								<form action="/admin/users/<%= user._id %>?_method=DELETE" method="POST" class="d-inline">
									<button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุงูุญุฐูุ')">๐๏ธ ุญุฐู</button>
								</form>
							</td>
						</tr>
					<% }) %>
				</tbody>
			</table>
		</div>
	<% } %>

	<div class="text-end mt-4">
		<a href="/admin/users/new" class="btn btn-primary btn-lg">โ ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ</a>
	</div>
</div>

<%- include('../../partials/footer') %>
