<%- include('../../partials/header') %>

<div class="container py-5">
	<h2 class="mb-4 text-primary fw-bold">๐ญ ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช</h2>

	<% if (roles.length === 0) { %>
		<div class="alert alert-info">ูุง ููุฌุฏ ุฃุฏูุงุฑ ุญุงูููุง.</div>
	<% } else { %>
		<div class="table-responsive">
			<table class="table table-bordered table-hover shadow-sm align-middle">
				<thead class="table-light text-center">
					<tr>
						<th>#</th>
						<th>๐งพ ุงุณู ุงูุฏูุฑ</th>
						<th>๐ ุงูุตูุงุญูุงุช</th>
						<th>โ๏ธ ุงูุชุญูู</th>
					</tr>
				</thead>
				<tbody>
					<% roles.forEach((role, index) => { %>
						<tr>
							<td class="text-center"><%= index + 1 %></td>
							<td><span class="badge bg-dark px-3 py-2 fs-6"><%= role.name %></span></td>
							<td>
								<% if (role.permissions && role.permissions.length > 0) { %>
									<div class="d-flex flex-wrap gap-1">
										<% role.permissions.forEach(p => { %>
											<span class="badge bg-success text-white"><%= p.key %></span>
										<% }) %>
									</div>
								<% } else { %>
									<span class="text-muted">ูุง ููุฌุฏ ุตูุงุญูุงุช</span>
								<% } %>
							</td>
							<td class="text-center">
								<a href="/admin/roles/<%= role._id %>/edit" class="btn btn-sm btn-warning me-1">โ๏ธ ุชุนุฏูู</a>
								<form action="/admin/roles/<%= role._id %>?_method=DELETE" method="POST" class="d-inline">
									<button class="btn btn-sm btn-danger" onclick="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุงูุญุฐูุ')">๐๏ธ ุญุฐู</button>
								</form>
							</td>
						</tr>
					<% }) %>
				</tbody>
			</table>
		</div>
	<% } %>

	<div class="text-end mt-4">
		<a href="/admin/roles/new" class="btn btn-primary btn-lg">โ ุฅุถุงูุฉ ุฏูุฑ ุฌุฏูุฏ</a>
	</div>
</div>

<%- include('../../partials/footer') %>
