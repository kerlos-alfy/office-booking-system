<%- include('partials/header') %>

<h1 class="mb-4 text-primary">👥 Clients</h1>

<a href="/clients/new" class="btn btn-success mb-4">+ Add New Client</a>

<% if (clients.length === 0) { %>
<div class="alert alert-info">No clients found.</div>
<% } else { %>
<table class="table table-bordered table-hover bg-white">
	<thead class="table-dark">
		<tr style="font-size: 14px">
			<th>#</th>
			<th>Mobile</th>
			<th>Company</th>
			<th>Owner Name</th>
			<th>Nationality</th>
			<th>Emirates ID Status</th>
			<th>Contract Status</th>
			<th>License Status</th>
			<th>Ejari No</th>
			<th>Documents</th>
			<th>Details</th>
			<th>Edit</th>
		</tr>
	</thead>
	<tbody>
		<% clients.forEach((client, index) => { %>
		<tr>
			<td><%= index + 1 %></td>
			<td><%= client.mobile %></td>
			<td><%= client.company_en %></td>
			<td><%= client.registered_owner_name_en %></td>
			<td><%= client.nationality_en %></td>
			<td>
				<% if (client.emirates_id_status === 'OK') { %>
				<span class="badge bg-success">OK</span>
				<% } else if (client.emirates_id_status === 'NOT NEED') { %>
				<span class="badge bg-secondary">NOT NEED</span>
				<% } else { %>
				<span class="badge bg-danger">Unavailable</span>
				<% } %>
			</td>
			<td>
				<% if (client.contract_status === 'OK') { %>
				<span class="badge bg-success">OK</span>
				<% } else { %>
				<span class="badge bg-danger">Not OK</span>
				<% } %>
			</td>
			<td>
				<% if (client.license_status === 'OK') { %>
				<span class="badge bg-success">OK</span>
				<% } else { %>
				<span class="badge bg-danger">Not OK</span>
				<% } %>
			</td>
			<td><%= client.ejari_no || 'N/A' %></td>
			<td>
				<a href="/clients/<%= client._id %>/upload" class="btn btn-sm btn-outline-primary">Upload Files</a>
			</td>
			<td>
				<a href="/clients/<%= client._id %>/view" class="btn btn-sm btn-outline-info">View Details</a>
			</td>
			<td>
				<a style="font-size: 12px" href="/clients/<%= client._id %>/edit" class="btn btn-warning fw-bold"> ✏️ Edit Client </a>
			</td>
		</tr>
		<% }) %>
	</tbody>
</table>
<% } %>

<!-- Fade In -->
<style>
	body {
		animation: fadeIn 0.5s ease-in;
	}

	@keyframes fadeIn {
		from {
			opacity: 0;
		}
		to {
			opacity: 1;
		}
	}

	.badge {
		font-size: 0.9rem;
		padding: 6px 10px;
	}
</style>

<script>
	$(document).ready(function () {
		$(".js-select2").select2({
			width: "100%",
			placeholder: "اختر الجنسية",
			allowClear: true,
		});
	});
</script>
<%- include('partials/footer') %>
